<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Resa till Rom - Cecilia Jakobsson</title>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-S7XXTKR460"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('consent', 'default', {
      'analytics_storage': 'denied'
    });
    gtag('js', new Date());
    gtag('config', 'G-S7XXTKR460', { 'cookie_domain': 'none' });
  </script>
  <link rel="stylesheet" href="./css/style.css">
  <meta name="description" content="Följ med Cecilia Jakobsson, den sjungande reseledaren, på en kulturhistorisk resa till Rom, den eviga staden.">
  <meta name="keywords" content="resa, Rom, Italien, Cecilia Jakobsson, sjungande reseledaren, kultur, historia, Colosseum, Vatikanen, bilder, galleri">
</head>
<body>
  <header>
    <div class="container">
      <div class="header-content">
        <div class="logo">Cecilia Jakobsson <span>Den personliga resan</span></div>
        <nav>
          <ul>
            <li><a href="index.html">Hem</a></li>
            <li><a href="resor.html">Resor</a></li>
            <li><a href="presentation.html">Presentation</a></li>
            <li><a href="foredrag.html">Föredrag</a></li>
            <li><a href="bildgalleri.html">Bildgalleri</a></li>
            <li><a href="kontakt.html">Kontakt</a></li>
          </ul>
        </nav>
        <a href="https://www.facebook.com/ceciliajakobsson.se" target="_blank" class="book-btn">
          <i>f</i> Boka nu via Facebook
        </a>
      </div>
    </div>
  </header>

  <main class="container">
    <div class="page-title">
      <h2>Rom - Den eviga staden</h2>
    </div>
    <div class="tour-detail-container" id="tour-detail-container">
      <!-- Tour content will be loaded dynamically -->
    </div>

        <div class="tour-image-gallery">
          <h3>Bilder från Rom</h3>
          <section class="gallery-section">
            <div class="gallery-grid">
              <div class="gallery-item" onclick="openLightbox('./assets/images/tours/tour-rom.jpg', 'Rom - Överblick av den eviga staden')" style="background-image: url('./assets/images/tours/tour-rom.jpg');"></div>
              <div class="gallery-item" onclick="openLightbox('./assets/images/tours/rom/rom1.jpg', 'Rom - Historiska monument')" style="background-image: url('./assets/images/tours/rom/rom1.jpg');"></div>
              <div class="gallery-item" onclick="openLightbox('./assets/images/tours/rom/rom2.jpg', 'Rom - Antika ruiner')" style="background-image: url('./assets/images/tours/rom/rom2.jpg');"></div>
              <div class="gallery-item" onclick="openLightbox('./assets/images/tours/rom/rom3.jpg', 'Rom - Stadsliv')" style="background-image: url('./assets/images/tours/rom/rom3.jpg');"></div>
              <div class="gallery-item" onclick="openLightbox('./assets/images/tours/rom/rom4.jpg', 'Rom - Arkitektoniska detaljer')" style="background-image: url('./assets/images/tours/rom/rom4.jpg');"></div>
              <div class="gallery-item" onclick="openLightbox('./assets/images/tours/rom/Via dei Coronari.jpg', 'Via dei Coronari - Charmig gata')" style="background-image: url('./assets/images/tours/rom/Via dei Coronari.jpg');"></div>
              <div class="gallery-item" onclick="openLightbox('./assets/images/tours/rom/rom_new1.jpg', 'Rom - Ny bild 1')" style="background-image: url('./assets/images/tours/rom/rom_new1.jpg');"></div>
              <div class="gallery-item" onclick="openLightbox('./assets/images/tours/rom/rom_new2.jpg', 'Rom - Ny bild 2')" style="background-image: url('./assets/images/tours/rom/rom_new2.jpg');"></div>
            </div>
          </section>
          
          <!-- Lightbox Modal -->
          <div id="lightbox" class="lightbox" onclick="closeLightbox()">
            <span class="lightbox-close">&times;</span>
            <img id="lightbox-img" class="lightbox-content" alt="" onclick="event.stopPropagation()">
            <div id="lightbox-caption" class="lightbox-caption" onclick="event.stopPropagation()"></div>
            <button class="lightbox-prev" onclick="event.stopPropagation(); changeLightboxImage(-1)">❮</button>
            <button class="lightbox-next" onclick="event.stopPropagation(); changeLightboxImage(1)">❯</button>
          </div>
        </div>

        <a href="resor.html" class="back-to-tours-btn">Tillbaka till alla resor</a>
      </div>
    </div>
  </main>

  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>Cecilia Jakobsson</h3>
          <p>Den sjungande reseledaren som tar dig med på oförglömliga resor.</p>
          <div class="social-links">
            <a href="https://www.facebook.com/ceciliajakobsson.se" target="_blank"><i>f</i></a>
            <a href="https://instagram.com" target="_blank"><i>i</i></a>
          </div>
        </div>
        <div class="footer-section">
          <h3>Snabblänkar</h3>
          <ul>
            <li><a href="index.html">Hem</a></li>
            <li><a href="resor.html">Resor</a></li>
            <li><a href="presentation.html">Presentation</a></li>
            <li><a href="foredrag.html">Föredrag</a></li>
            <li><a href="bildgalleri.html">Bildgalleri</a></li>
            <li><a href="kontakt.html">Kontakt</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Boka Din Resa</h3>
          <p>Boka din plats på någon av mina kommande resor!</p>
          <a href="https://m.me/ceciliajakobsson.se" target="_blank" class="book-btn">
            <i>f</i> Boka nu via Facebook
          </a>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 Cecilia Jakobsson. Alla rättigheter förbehållna.</p>
      </div>
    </div>
  </footer>

  <div id="cookie-consent" class="cookie-consent" style="display: none;">
    <div class="cookie-content">
      <h3>Vi använder cookies</h3>
      <p>Vi använder cookies för att förbättra din upplevelse, analysera trafik och personanpassa innehåll. Genom att klicka på "Acceptera alla" godkänner du vår användning av cookies. Du kan också välja att anpassa dina inställningar.</p>
      <div class="cookie-buttons">
        <button id="accept-all-cookies" class="cookie-btn accept-btn">Acceptera alla</button>
        <button id="customize-cookies" class="cookie-btn customize-btn">Anpassa inställningar</button>
        <button id="reject-cookies" class="cookie-btn reject-btn">Avvisa alla</button>
      </div>
    </div>
    <div id="cookie-settings" class="cookie-settings" style="display: none;">
      <h3>Cookie-inställningar</h3>
      <div class="cookie-option">
        <div>
          <input type="checkbox" id="necessary-cookies" checked disabled>
          <label for="necessary-cookies">Nödvändiga cookies</label>
        </div>
        <p>Dessa cookies är nödvändiga för att webbplatsen ska fungera och kan inte stängas av.</p>
      </div>
      <div class="cookie-option">
        <div>
          <input type="checkbox" id="analytics-cookies">
          <label for="analytics-cookies">Analys-cookies</label>
        </div>
        <p>Hjälper oss att förstå hur besökare använder webbplatsen, vilket gör att vi kan förbättra hur den fungerar.</p>
      </div>
      <div class="cookie-option">
        <div>
          <input type="checkbox" id="marketing-cookies">
          <label for="marketing-cookies">Marknadsförings-cookies</label>
        </div>
        <p>Används för att spåra besökare på webbplatser. Avsikten är att visa annonser som är relevanta och engagerande.</p>
      </div>
      <div class="cookie-buttons settings-buttons">
        <button id="save-preferences" class="cookie-btn save-btn">Spara inställningar</button>
        <button id="cancel-preferences" class="cookie-btn cancel-btn">Avbryt</button>
      </div>
    </div>
  </div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const consentDiv = document.getElementById('cookie-consent');
  const settingsDiv = document.getElementById('cookie-settings');
  const acceptAllBtn = document.getElementById('accept-all-cookies');
  const rejectBtn = document.getElementById('reject-cookies');
  const customizeBtn = document.getElementById('customize-cookies');
  const saveBtn = document.getElementById('save-preferences');
  const cancelBtn = document.getElementById('cancel-preferences');

  if (!localStorage.getItem('cookieConsent')) {
    consentDiv.style.display = 'block';
  } else {
    applyConsent();
  }

  const acceptAllCookiesHandler = () => {
    localStorage.setItem('cookieConsent', 'accepted');
    localStorage.setItem('analyticsCookies', 'true');
    localStorage.setItem('marketingCookies', 'true');
    consentDiv.style.display = 'none';
    applyConsent();
  };

  const rejectCookies = () => {
    localStorage.setItem('cookieConsent', 'rejected');
    localStorage.setItem('analyticsCookies', 'false');
    localStorage.setItem('marketingCookies', 'false');
    consentDiv.style.display = 'none';
    applyConsent();
  };

  const customizeCookies = () => {
    settingsDiv.style.display = 'block';
    if (document.querySelector('.cookie-content')) {
        document.querySelector('.cookie-content').style.display = 'none';
    }
  };

  const savePreferences = () => {
    const analyticsConsent = document.getElementById('analytics-cookies').checked;
    const marketingConsent = document.getElementById('marketing-cookies').checked;
    localStorage.setItem('cookieConsent', 'custom');
    localStorage.setItem('analyticsCookies', analyticsConsent);
    localStorage.setItem('marketingCookies', marketingConsent);
    consentDiv.style.display = 'none';
    applyConsent();
  };

  const cancelPreferences = () => {
    settingsDiv.style.display = 'none';
     if (document.querySelector('.cookie-content')) {
        document.querySelector('.cookie-content').style.display = 'block';
    }
  };

  if (acceptAllBtn) acceptAllBtn.addEventListener('click', acceptAllCookiesHandler);
  if (rejectBtn) rejectBtn.addEventListener('click', rejectCookies);
  if (customizeBtn) customizeBtn.addEventListener('click', customizeCookies);
  if (saveBtn) saveBtn.addEventListener('click', savePreferences);
  if (cancelBtn) cancelBtn.addEventListener('click', cancelPreferences);

  function applyConsent() {
    const analyticsConsent = localStorage.getItem('analyticsCookies') === 'true' ? 'granted' : 'denied';
    if (typeof gtag === 'function') {
        gtag('consent', 'update', {
          'analytics_storage': analyticsConsent
        });
      }
    }
  });

  // Load tour data dynamically
  fetch('tours.json')
    .then(response => response.json())
    .then(data => {
      const romTour = data.tours.find(tour => tour.id === 2); // Rome tour has id 2
      if (romTour) {
        const container = document.getElementById('tour-detail-container');
        container.innerHTML = `
          <img src="${romTour.image}" alt="${romTour.title}" class="tour-detail-image">
          <div class="tour-detail-content">
            <h3>Upptäck den eviga staden till fots</h3>
            <p>${romTour.long_description}</p>
            <div class="tour-meta-detail">
              <p><strong>Antal dagar:</strong> ${romTour.days}</p>
              <p><strong>Pris:</strong> ${romTour.price}</p>
              <p><strong>Platser:</strong> ${romTour.places}</p>
              ${romTour.urgency_text ? `<p class="urgency-text-detail"><strong>${romTour.urgency_text}</strong></p>` : ''}
            </div>
            <a href="https://www.facebook.com/ceciliajakobsson.se" target="_blank" class="book-btn tour-detail-book-btn">
                <i>f</i> Boka denna resa via Facebook
            </a>
            
            <div class="booking-info">
              <p><strong>Vill du veta mer?</strong> Kontakta mig via Facebook för detaljerad information om resans innehåll, exakt pris och vad som ingår. Jag svarar gärna på alla dina frågor.</p>
            </div>
          </div>
        `;
      }
    })
    .catch(error => console.error('Error loading tour data:', error));

  // Gallery functionality
  let currentImageIndex = 0;
  let currentImages = [];

  function openLightbox(imgSrc, caption) {
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightbox-img');
    const lightboxCaption = document.getElementById('lightbox-caption');
    
    lightboxImg.src = imgSrc;
    lightboxCaption.textContent = caption;
    lightbox.style.display = 'flex';
    
    // Build array of all images for navigation
    currentImages = getAllGalleryImages();
    currentImageIndex = currentImages.findIndex(img => img.src === imgSrc);
    
    document.body.style.overflow = 'hidden'; // Prevent background scrolling
  }

  function closeLightbox() {
    const lightbox = document.getElementById('lightbox');
    lightbox.style.display = 'none';
    document.body.style.overflow = 'auto'; // Restore scrolling
  }

  function changeLightboxImage(direction) {
    currentImageIndex += direction;
    
    if (currentImageIndex >= currentImages.length) {
      currentImageIndex = 0;
    } else if (currentImageIndex < 0) {
      currentImageIndex = currentImages.length - 1;
    }
    
    const lightboxImg = document.getElementById('lightbox-img');
    const lightboxCaption = document.getElementById('lightbox-caption');
    
    lightboxImg.src = currentImages[currentImageIndex].src;
    lightboxCaption.textContent = currentImages[currentImageIndex].caption;
  }

  function getAllGalleryImages() {
    const images = [];
    document.querySelectorAll('.gallery-item').forEach(item => {
      const backgroundImage = item.style.backgroundImage;
      const src = backgroundImage.slice(5, -2); // Remove 'url("' and '")'
      const caption = item.getAttribute('onclick').match(/'([^']+)'/g)[1].slice(1, -1);
      images.push({ src, caption });
    });
    return images;
  }

  // Close lightbox with Escape key
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      closeLightbox();
    } else if (e.key === 'ArrowLeft') {
      changeLightboxImage(-1);
    } else if (e.key === 'ArrowRight') {
      changeLightboxImage(1);
    }
  });
  </script>
  </body>
  </html>